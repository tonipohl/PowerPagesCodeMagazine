<powerpagecomponent powerpagecomponentid="0554744b-3d47-ee11-be6e-000d3ab0ecd2">
  <content>{
  "copy": "{% include 'Portal Web API Wrapper' %}\n&lt;div data-ppid=\"abc76287-f533-b045-481b-96e7791cdacc\" class=\"row sectionBlockLayout\" style=\"display: flex; flex-wrap: wrap; padding: 8px; margin: 0px; text-align: left; min-height: 100px;\"&gt;\n  &lt;div data-ppid=\"91669ea1-9fdb-f15b-ce45-c62cdc9ed2c7\" class=\"container\"&gt;\n    &lt;div id=\"header\" class=\"col-md-12\" style=\"flex-grow: 1; display: flex; flex-direction: column; min-width: 300px; align-items: center;\"&gt;\n      &lt;h2 data-ppid=\"b7e34075-5f84-7adc-cbe7-37756005d1af\"&gt;My registrations&lt;/h2&gt;\n      &lt;br /&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;div data-ppid=\"a8fc0ce6-28aa-d85c-69c7-e86910c7b415\" class=\"row sectionBlockLayout\" style=\"display: flex; flex-wrap: wrap; padding: 8px; margin: 0px;\"&gt;\n  &lt;div data-ppid=\"e54dc019-6829-3a60-1dcb-a9c0a4741e27\" class=\"container\" style=\"display: flex; flex-wrap: wrap;\"&gt;&lt;div class=\"col-md-10\"&gt;{% include 'Registration Filters' %}&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div data-ppid=\"ea722809-5912-c7ef-1888-854f34242392\" class=\"row sectionBlockLayout\" style=\"display: flex; flex-wrap: wrap; padding: 8px; margin: 0px;\"&gt;\n  &lt;div data-ppid=\"4e6b0549-15e2-b692-b00c-08545a55951c\" class=\"container\" style=\"padding: 0px; display: flex; flex-wrap: wrap;\"&gt;\n    &lt;div data-ppid=\"8a988cbc-6e96-82a8-5fe0-bf9ec5e1ed54\" class=\"col-md-2 columnBlockLayout\" style=\"flex-grow: 1; display: flex; flex-direction: column; min-width: 250px; word-break: break-word;\"&gt;\n      &lt;h2 data-ppid=\"03c2ac41-9ca4-1f92-0abe-8ba2c5b94009\" style=\"text-align: center;\"&gt;{{ snippets['My Attendees'] }}&lt;/h2&gt;\n      &lt;div class=\"child-filter\"&gt;\n        &lt;ul class=\"attendee-ol\"&gt;\n          &lt;li&gt;\n            &lt;span class=\"child-my-registration-card\"\n              &gt;&lt;label data-ppid=\"901ca3d3-0f6d-02fb-4c7a-da041fcbb7e1\" class=\"checkbox-container-vertical\"\n                &gt;&lt;input type=\"checkbox\" name=\"self\" value=\"contactid\" class=\"checkAttendee\" /&gt;&lt;span class=\"checkmark-registration\"&gt;&lt;/span&gt;&lt;label for=\"selfcontactid\" data-ppid=\"b3b5f679-4a33-4b5e-798f-ecf4faa9d3a4\"&gt;&lt;/label&gt;&lt;img data-contact=\"\" src=\"/child-placeholder.svg\" alt=\"user profile photo\" data-ppid=\"5681991a-0e7a-11cb-c0e0-740a885083b7\" style=\"max-width: 100%;\" /&gt;\n                &lt;p data-ppid=\"25a5fef8-a76e-e1a4-fd39-0feb0b76e0f3\" class=\"card-text-xsmall text-center\"&gt;Me/Myself&lt;/p&gt;&lt;/label\n              &gt;&lt;/span\n            &gt;\n          &lt;/li&gt;\n          {% include 'Attendee Filter' %}\n        &lt;/ul&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div data-ppid=\"c0f34eae-54d2-9cd2-7316-4779369e3d94\" class=\"col-md-10 columnBlockLayout\" style=\"flex-grow: 1; display: flex; flex-direction: column; min-width: 250px; word-break: break-word;\"&gt;&lt;div class=\"row registration-card-row\"&gt;{% include 'Registration Catalog' %}&lt;/div&gt;&lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- Unregister modal --&gt;\n&lt;dialog id=\"unregisterDialog\" class=\"modal-content nativeModal\"&gt;\n  &lt;div class=\"modal-header\"&gt;&lt;h2 data-ppid=\"29ed854b-85b1-d107-6748-555bd52f18d6\" class=\"modal-title\"&gt;Cancel registration?&lt;/h2&gt;&lt;/div&gt;\n  &lt;form method=\"dialog\"&gt;&lt;iframe frameborder=\"0\" width=\"100%\" height=\"auto\" id=\"unregister-wrapper-iframe\" allowfullscreen=\"\" data-ppid=\"7209ae4d-cdfc-228f-ce4b-8747455f02da\" src=\"https://www.bing.com\"&gt;&lt;/iframe&gt;&lt;button value=\"cancel\" data-ppid=\"ec9044e8-86ff-86d6-e31d-59477cc9b692\" class=\"modalCloser\"&gt;Close Dialog&lt;/button&gt;&lt;/form&gt;\n&lt;/dialog&gt;\n&lt;!--\n  &lt;p&gt;\n    &lt;button aria-label=\"Add Attendee Button\" id=\"updateDetails\"&gt;Add Attendee&lt;/button&gt;\n  &lt;/p&gt;\n--&gt;&lt;output\n&gt;&lt;/output\n&gt;&lt;!-- @end Unregister modal --&gt;\n",
  "customcss": "/* pagination */\r\ndiv.view-pagination {\r\n  order: 1;\r\n  width: 100%;\r\n  height: 45px;\r\n  text-align: center;\r\n}\r\n\r\ndiv.pagination {\r\n  float: none;\r\n}\r\n\r\n.pagination&gt;li:first-child &gt; a, .pagination&gt;li:last-child &gt; a {\r\n  border: 1px solid #404040;\r\n  border-radius: 50%;\r\n}\r\n.pagination&gt;.disabled&gt;span, .pagination&gt;.disabled&gt;span:hover, .pagination&gt;.disabled&gt;span:focus, .pagination&gt;.disabled&gt;a, .pagination&gt;.disabled&gt;a:hover, .pagination&gt;.disabled&gt;a:focus {\r\n  background: transparent;\r\n}\r\n.pagination &gt; li &gt; a, .pagination &gt; li &gt; span {\r\n  width: 20px;\r\n  height: 20px;\r\n  padding: 0px 5px;\r\n  margin: 0;\r\n}\r\n.pagination &gt; li &gt; a {\r\n  font-size: 12px;\r\n  color: #404040;\r\n  font-weight: 500;\r\n}\r\n\r\n.pagination&gt;.active&gt;a, .pagination&gt;.active&gt;a:hover, .pagination&gt;.active&gt;a:focus, .pagination&gt;.active&gt;span, .pagination&gt;.active&gt;span:hover, .pagination&gt;.active&gt;span:focus {\r\n  background-color: transparent;\r\n  color: #BF7560;\r\n  font-weight: 700;\r\n  border: none;\r\n}\r\n.pagination &gt; li &gt; a, .pagination &gt; li &gt; span {\r\n  width: 20px;\r\n  height: 20px;\r\n  padding: 0px 5px;\r\n  margin: 0;\r\n}\r\n.pagination &gt; li &gt; a {\r\n  font-size: 12px;\r\n  color: #404040;\r\n  font-weight: 500;\r\n}\r\n\r\n",
  "customjavascript": "// Allows close modal from the popup  \r\nwindow.closeModal = function() {\r\n    $('#unregisterModal').modal('hide');\r\n};\r\n\r\n$(function() {\r\n    $(document).ready(function() {\r\n        var active = sessionStorage.getItem(\"aspFocused\");\r\n        if (active) {\r\n            e = document.getElementById(active).focus();\r\n        }\r\n    });\r\n\r\n    var seasonFilter = \"{{request.params['season'] | xml_escape }}\";\r\n    var attendeeFilterString = \"{{request.params['attendees'] | xml_escape }}\";\r\n    var attendeeFilterArray;\r\n\r\n    if (attendeeFilterString != \"\" &amp;&amp; attendeeFilterString.includes(\",\"))\r\n        attendeeFilterArray = attendeeFilterString.split(\",\")\r\n    else if (attendeeFilterString != \"\")\r\n        attendeeFilterArray = [attendeeFilterString];\r\n    else\r\n        attendeeFilterArray = [];\r\n\r\n\r\n    // Get the course image\r\n    $(\".card-flex-right\").each(function() {\r\n        let imgURL = \"\";\r\n        const courseid = this.dataset.courseid;\r\n        const regid = this.dataset.regid;\r\n        webapi.safeAjax({\r\n            type: \"GET\",\r\n            url: \"/_api/msdynce_courses(\" + courseid + \")/msdynce_entityimage/?size=full\",\r\n            contentType: \"application/json\",\r\n            success: function(res, status) {\r\n                let imgHTML = \"\";\r\n                if (res) {\r\n                    imgURL = \"data:image/png;base64,\" + res.value;\r\n                    imgHTML = \"&lt;img class='image-right'  src=\" + imgURL + \"  alt='course photo'&gt;\";\r\n                } else {\r\n                    imgHTML = \"&lt;img class='image-right'  src='/card-placeholder.svg'  alt='course photo'&gt;\";\r\n                }\r\n                $(\"#div\" + regid).append(imgHTML);\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n    // Load user's card image\r\n    $(\".sub-left img\").each(function() {\r\n        loadImage(this.dataset.attendee, this);\r\n    });\r\n\r\n    // Load user's mobile card image\r\n    $(\".mobile-right img\").each(function() {\r\n        loadImage(this.dataset.attendee, this);\r\n    });\r\n\r\n    // Load user's image\r\n    $(\".child-filter-card img:not(.child-filter-card img:first-child)\").each(function() {\r\n        loadImage(this.dataset.contact, this);\r\n    });\r\n\r\n\r\n    //Load checked attendees\r\n    for (let a = 0; a &lt; attendeeFilterArray.length; a++) {\r\n        $(\"input[class='checkAttendeeMobile'][value='\" + attendeeFilterArray[a] + \"']\").parent().addClass(\"filterSelected\");\r\n        $(\"input[class='checkAttendeeMobile'][value='\" + attendeeFilterArray[a] + \"']\").prop('checked', true);\r\n        $(\"input[class='checkAttendee'][value='\" + attendeeFilterArray[a] + \"']\").prop('checked', true);\r\n    }\r\n\r\n\r\n    /* START ATTENDEE FILTER */\r\n    $(\".child-filter input[type='checkbox']\").on(\"change\", function() {\r\n        //resetForFilter();\r\n        if (this.checked) {\r\n            attendeeFilterArray.push(this.value);\r\n            $(\"input[class='checkAttendeeMobile'][value='\" + this.value + \"']\").parent().addClass(\"filterSelected\");\r\n            $(\"input[class='checkAttendeeMobile'][value='\" + this.value + \"']\").prop('checked', true);\r\n\r\n        } else {\r\n            $(\"input[class='checkAttendeeMobile'][value='\" + this.value + \"']\").parent().removeClass(\"filterSelected\");\r\n            $(\"input[class='checkAttendeeMobile'][value='\" + this.value + \"']\").prop('checked', false);\r\n            const pos = attendeeFilterArray.indexOf(this.value);\r\n            attendeeFilterArray.splice(pos, 1);\r\n        }\r\n        var elemId = this.id;\r\n        sessionStorage.setItem(\"aspFocused\", elemId);\r\n        attendeeFilterString = arrayToString(attendeeFilterArray);\r\n        buildUrl(seasonFilter, attendeeFilterString);\r\n    });\r\n\r\n    /* START ATTENDEE MOBILE FILTER */\r\n    $('.checkAttendeeMobile').on(\"change\", function() {\r\n        if (this.checked) {\r\n            $(this).parent().addClass(\"filterSelected\");\r\n            attendeeFilterArray.push(this.value);\r\n            $(\"input[class='checkAttendee'][value='\" + this.value + \"']\").prop('checked', true);\r\n        } else {\r\n            $(this).parent().removeClass(\"filterSelected\");\r\n            const pos = attendeeFilterArray.indexOf(this.value);\r\n            attendeeFilterArray.splice(pos, 1);\r\n            $(\"input[class='checkAttendee'][value='\" + this.value + \"']\").prop('checked', false);\r\n        }\r\n    });\r\n\r\n    /* HANDLE APPLY IN MOBILE FILTER */\r\n    $('#applyAttendee').on(\"click\", function() {\r\n        attendeeFilterString = arrayToString(attendeeFilterArray);\r\n        buildUrl(seasonFilter, attendeeFilterString);\r\n    });\r\n\r\n    $(document).on('click', '.dropdown-filters .dropdown-menu', function(e) {\r\n        e.stopPropagation();\r\n    });\r\n\r\n\r\n    //Keep the filter dropdowns from collapsing after clicking an option\r\n    $(document).on('click', '.catalog-dropdown-filters .dropdown-menu', function(e) {\r\n        e.stopPropagation();\r\n    });\r\n\r\n    $(\"#courseSeason+ul li\").on(\"click\", function() {\r\n        seasonFilter = this.dataset.val;\r\n        buildUrl(seasonFilter, attendeeFilterString);\r\n    });\r\n\r\n    //Season filter\r\n    $(\"#applySeasonCatalog\").on(\"click\", function() {\r\n        //Get the selected season value\r\n        const selectedSeason = $(\"input:radio[name='SeasonMobile']:checked\").val();\r\n        seasonFilter = selectedSeason;\r\n        buildUrl(seasonFilter, attendeeFilterString);\r\n    });\r\n\r\n    $('.radioSeasonMobile').on(\"change\", function() {\r\n        if (this.checked) {\r\n            $('input[name=\"SeasonMobile\"]').parent().removeClass(\"filterSelected\");\r\n            $(this).parent().addClass(\"filterSelected\");\r\n        } else\r\n            $(this).parent().removeClass(\"filterSelected\");\r\n    });\r\n\r\n    //Search\r\n    $(\"#btnsearch\").on(\"click\", function() {\r\n        const txt = $(\"#txtsearch\");\r\n        buildUrlSearch(txt.val());\r\n    });\r\n\r\n    $('#txtsearch').on(\"change\", function() {\r\n        if (this.value.length == 0) {\r\n            let url = window.location.href;\r\n            url = url.replace(window.location.search, \"\");\r\n            if (url != \"\")\r\n                window.location.href = url;\r\n        }\r\n    });\r\n});\r\n\r\nfunction loadImage(objectId, selector) {\r\n    var imgURL = \"\";\r\n    webapi.safeAjax({\r\n        type: \"GET\",\r\n        url: \"/_api/contacts(\" + objectId + \")?$select=entityimage\",\r\n        contentType: \"application/json\",\r\n        success: function(res, status) {\r\n            if (res.entityimage) {\r\n                var imgBaseString = res.entityimage;\r\n                var imgHTML = \"\";\r\n                imgURL = \"data:image/png;base64,\" + imgBaseString;\r\n                $(selector).attr(\"src\", imgURL);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction changeParameterValue(url, parameter, newValue) {\r\n    if (url.includes(parameter)) {\r\n        const i = url.indexOf(parameter) + parameter.length;\r\n        url = replaceAt(url, i, newValue);\r\n    }\r\n    return url;\r\n}\r\n\r\nfunction replaceAt(str, index, replacement) {\r\n    return str.substr(0, index) + replacement + str.substr(index + replacement.length);\r\n}\r\n\r\n//Season filter and Search\r\nfunction buildUrl(season, attendees) {\r\n    let queryUrl = window.location.href;\r\n    //Remove all queries\r\n    queryUrl = queryUrl.replace(window.location.search, \"\");\r\n    //Set the page to 1\r\n    queryUrl = queryUrl + \"?page=1\";\r\n\r\n    if (season &amp;&amp; season != \"\")\r\n        queryUrl = queryUrl + \"&amp;season=\" + season;\r\n    if (attendees &amp;&amp; attendees != \"\")\r\n        queryUrl = queryUrl + \"&amp;attendees=\" + attendees;\r\n\r\n    window.location.href = queryUrl;\r\n}\r\n\r\nfunction buildUrlSearch(search) {\r\n    let queryUrl = window.location.href;\r\n    //Remove all queries\r\n    queryUrl = queryUrl.replace(window.location.search, \"\");\r\n    //Set the page to 1\r\n    queryUrl = queryUrl + \"?page=1\";\r\n\r\n    if (search &amp;&amp; search != \"\")\r\n        queryUrl = queryUrl + \"&amp;search=\" + search;\r\n\r\n    window.location.href = queryUrl;\r\n}\r\n\r\nfunction arrayToString(arrayVar) {\r\n    var stringVar = \"\";\r\n    arrayVar.forEach(function(element, i, array) {\r\n        var auxString = arrayVar[i].toString();\r\n        if (i == 0)\r\n            stringVar = auxString;\r\n        else\r\n            stringVar = stringVar + \",\" + auxString;\r\n    });\r\n    //If nothing was selected, set the variable to null or the API will throw an error\r\n    if (stringVar == \"\")\r\n        stringVar = null;\r\n\r\n    return stringVar;\r\n}\r\n\r\nconst updateButton = document.getElementById('updateDetails');\r\nconst unregisterDialog = document.getElementById('unregisterDialog');\r\nconst outputBox = document.querySelector('output');\r\n\r\n// If a browser doesn't support the dialog, then hide the\r\n// dialog contents by default.\r\nif (typeof unregisterDialog.showModal !== 'function') {\r\n  unregisterDialog.hidden = true;\r\n  /* a fallback script to allow this dialog/form to function\r\n     for legacy browsers that do not support &lt;dialog&gt;\r\n     could be provided here.\r\n  */\r\n}\r\n// \"Update details\" button opens the &lt;dialog&gt; modally\r\nupdateButton.addEventListener('click', () =&gt; {\r\n  if (typeof unregisterDialog.showModal === \"function\") {\r\n    unregisterDialog.showModal();\r\n  } else {\r\n    outputBox.value = \"Sorry, the &lt;dialog&gt; API is not supported by this browser.\";\r\n  }\r\n});\r\n\r\n// \"Confirm\" button of form triggers \"close\" on dialog because of [method=\"dialog\"]\r\nunregisterDialog.addEventListener('close', () =&gt; {\r\n  outputBox.value = `${unregisterDialog.returnValue} button clicked - ${(new Date()).toString()}`;\r\n});\r\n\r\n\r\nfunction showUnregisterModal(registrationId) {\r\n    $('#unregister-wrapper-iframe').attr('src', '/unregister-attendee?id=' + registrationId);\r\n    if (typeof unregisterDialog.showModal === \"function\") {\r\n        unregisterDialog.showModal();\r\n      } else {\r\n        outputBox.value = \"Sorry, the &lt;dialog&gt; API is not supported by this browser.\";\r\n      }\r\n}",
  "displayorder": 4,
  "enablerating": false,
  "enabletracking": false,
  "excludefromsearch": false,
  "feedbackpolicy": 756150000,
  "hiddenfromsitemap": false,
  "isroot": false,
  "pagetemplateid": "4d467245-3d47-ee11-be6e-000d3ab0ecd2",
  "parentpageid": "b154744b-3d47-ee11-be6e-000d3ab0ecd2",
  "partialurl": "my-registrations",
  "publishingstateid": "aa617151-3d47-ee11-be6e-000d3ab0ecd2",
  "rootwebpageid": "e154744b-3d47-ee11-be6e-000d3ab0ecd2",
  "sharedpageconfiguration": true,
  "summary": "&lt;p&gt;This is sample landing page for you to start building your website&lt;/p&gt;",
  "title": "My Registrations"
}</content>
  <iscustomizable>1</iscustomizable>
  <name>My Registrations</name>
  <powerpagecomponenttype>2</powerpagecomponenttype>
  <powerpagesiteid>
    <powerpagesiteid>c3627151-3d47-ee11-be6e-000d3ab0ecd2</powerpagesiteid>
  </powerpagesiteid>
  <powerpagesitelanguageid>
    <powerpagesitelanguageid>c5627151-3d47-ee11-be6e-000d3ab0ecd2</powerpagesitelanguageid>
  </powerpagesitelanguageid>
  <statecode>0</statecode>
  <statuscode>1</statuscode>
</powerpagecomponent>